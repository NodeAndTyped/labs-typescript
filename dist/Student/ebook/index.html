<!DOCTYPE html>
<html lang="en">
<head>

    <title>Labs TypeScript</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Merriweather:400,300,700" rel="stylesheet" type="text/css">

    <link type="text/css" rel="stylesheet" href="assets/styles/materialize.min.css" media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="assets/styles/github-markdown.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/github.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/glyph.css" />
    <link type="text/css" rel="stylesheet" href="assets/styles/main.css" />

</head>
<body>


<header class="navbar-fixed">

    <nav class="navbar">
        <div class="nav-wrapper">
            <a href="http://valtech.fr" class="brand-logo hide-on-med-and-down">
                <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>
            </a>

            <a class="brand-logo center">
                Labs TypeScript
            </a>

            <a href="#" data-activates="global-menu-mobile" class="button-collapse"><i class="material-icons">menu</i></a>

            <ul class="right">
                <li>
                    <a href="https://github.com/NodeAndTyped/labs-typescript/" title="See on github">
                        <i class="material-icons">visibility</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a href="#!" class="dropdown-button" title="download" data-activates="global-menu-download" data-beloworigin="true">
                        <i class="material-icons">file_download</i>
                    </a>
                </li>

                <li class="hide-on-med-and-down">
                    <a class="dropdown-button" href="#!" data-activates="global-menu" data-beloworigin="true">
                        <i class="material-icons">menu</i>
                    </a>
                </li>
            </ul>


        </div>
    </nav>

</header>

<ul class="side-nav" id="global-menu-mobile">

    <li class="logo">

        <i class="valtech-logo--header glyph" data-icon="valtech-logo" aria-hidden="true"></i>

    </li>

    
            <li><a href="#accueil">Accueil</a></li>
        
            <li><a href="#tp1installation">TP1 - Installation</a></li>
        
            <li><a href="#tp2creationduncomposant">TP2 - Création d&#39;un composant</a></li>
        
            <li><a href="#tp3creationdunserviceetappeldunwebservice">TP3 - Création d&#39;un service et appel d&#39;un webservice</a></li>
        
            <li><a href="#tp4creationdundecorateur">TP4 - Création d&#39;un décorateur</a></li>
        
            <li><a href="#tp5rechercheruneannonce">TP5 - Rechercher une annonce</a></li>
        
            <li><a href="#tp6consultationduneannonce">TP6 - Consultation d&#39;une annonce</a></li>
        

    <li><div class="divider"></div></li>

    <li class="no-padding">
        <ul class="collapsible collapsible-accordion">
            <li>
                <a class="collapsible-header">Télécharger<i class="material-icons">arrow_drop_down</i></a>
                <div class="collapsible-body">
                    <ul>

                        <li>
                            <a href="https://github.com/NodeAndTyped/labs-typescript/zipball/master">
                                Documentation (master)
                            </a>
                        </li>

                        
                                <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp1-installation.zip">tp1-installation</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp2-solution.zip">tp2-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp3-solution.zip">tp3-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp4-solution.zip">tp4-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp5-solution.zip">tp5-solution</a></li>
                            
                                <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp6-solution.zip">tp6-solution</a></li>
                            
                    </ul>
                </div>
            </li>
        </ul>
    </li>

</ul>

<ul id="global-menu" class="dropdown-menu dropdown-content">
    
            <li><a href="#accueil">Accueil</a></li>
        
            <li><a href="#tp1installation">TP1 - Installation</a></li>
        
            <li><a href="#tp2creationduncomposant">TP2 - Création d&#39;un composant</a></li>
        
            <li><a href="#tp3creationdunserviceetappeldunwebservice">TP3 - Création d&#39;un service et appel d&#39;un webservice</a></li>
        
            <li><a href="#tp4creationdundecorateur">TP4 - Création d&#39;un décorateur</a></li>
        
            <li><a href="#tp5rechercheruneannonce">TP5 - Rechercher une annonce</a></li>
        
            <li><a href="#tp6consultationduneannonce">TP6 - Consultation d&#39;une annonce</a></li>
        
</ul>


<ul id="global-menu-download" class="dropdown-menu dropdown-content">
    <li>
        <a href="https://github.com/NodeAndTyped/labs-typescript/zipball/master">
            Télécharger la documentation (master)
        </a>
    </li>

    <li class="divider"></li>

    
            <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp1-installation.zip">Télécharger tp1-installation</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp2-solution.zip">Télécharger tp2-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp3-solution.zip">Télécharger tp3-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp4-solution.zip">Télécharger tp4-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp5-solution.zip">Télécharger tp5-solution</a></li>
        
            <li><a href="https://github.com/NodeAndTyped/labs-typescript/archive/tp6-solution.zip">Télécharger tp6-solution</a></li>
        

</ul>

<div class="container container-body">
    <article class="markdown-body">
        <div id="accueil"></div>
<h1>Sommaire</h1>
<p>Nous verrons au cours des travaux pratiques les points suivants :</p>
<ul class="page-summary">
    
        <li><a href="#tp1installation">TP1 - Installation,</a></li>
    
        <li><a href="#tp2creationduncomposant">TP2 - Création d&#39;un composant,</a></li>
    
        <li><a href="#tp3creationdunserviceetappeldunwebservice">TP3 - Création d&#39;un service et appel d&#39;un webservice,</a></li>
    
        <li><a href="#tp4creationdundecorateur">TP4 - Création d&#39;un décorateur,</a></li>
    
        <li><a href="#tp5rechercheruneannonce">TP5 - Rechercher une annonce,</a></li>
    
        <li><a href="#tp6consultationduneannonce">TP6 - Consultation d&#39;une annonce.</a></li>
    
</ul>

<h2>Objectifs</h2>
<p>Les TP ont pour objectif de vous apprendre à développer avec le langage TypeScript tout en utilisant des librairies JavaScript
préexistante telles que jQuery, Materialize-css, fetch ou lodash.</p>
<p>Pour ce faire nous allons créer une petite application web de consultation d'annonce de vente immobilière.</p>
<p>Nous verrons par ailleurs les notions suivantes :</p>
<ul>
<li>Utiliser les arrows functions,</li>
<li>Utiliser les mots clefs let et const,</li>
<li>Créer une classe TypeScript,</li>
<li>Créer une interface pour typer un objet retourné par un WebService,</li>
<li>Gérer des templates,</li>
<li>Utiliser l'héritage pour concevoir des composants,</li>
<li>Utiliser l'aggregation de paramètre,</li>
<li>Utiliser les collections ES6,</li>
<li>Utiliser la librairie fetch pour faire un appel Ajax,</li>
<li>Créer un décorateur TypeScript pour faciliter la création de composant.</li>
</ul>

<div id="tp1installation"></div>
<h1>TP 1</h1>
<blockquote>
<p>Installation de l'environnement</p>
</blockquote>
<h2>Prérequis</h2>
<p>Vérifiez que vous avez les éléments suivants d’installés sur votre poste :</p>
<ul>
<li>Node v6 ou plus avec la commande npm –v,</li>
<li>Git, nous l’utiliserons pour récupérer le projet initial,</li>
<li>Webstorm (ou un autre IDE)</li>
</ul>
<h2>Installation</h2>
<h3>Initialisation du projet</h3>
<p>Créez un nouveau projet dans votre IDE. Puis dans le terminal, placez-vous sur votre nouveau projet et lancez la commande suivante :</p>
<pre><code class="bash">npm init
</code></pre>
<blockquote>
<p>Suivez le guide d'initialisation de la commande. Elle va créer le fichier <code>package.json</code> avec les informations du projet.</p>
</blockquote>
<h3>Installation des modules</h3>
<p>Maintenant nous allons installer les modules nécessaires à un projet TypeScript.</p>
<p>Toujours dans le terminal lancez la commande suivante :</p>
<pre><code>npm install -g typescript@2
npm install --save @types/jquery materialize-css
npm install --save-dev connect-history-api-fallback http-proxy-middleware lite-server
tsc --init
</code></pre>
<p>La commande <code>tsc --init</code> va créer un nouveau fichier <code>tsconfig.json</code>. Ce fichier contient les informations nécessaire
au compilateur TypeScript pour compiler nos fichiers sources.</p>
<p>En l'état, il nous manque quelques options de compilation dans le <code>tsconfig.json</code>.</p>
<p>Voici les options à reporter dans votre <code>tsconfig.json</code>: </p>
<pre><code class="json">{
  "compilerOptions": {
    "module": "commonjs",
    "target": "es6",
    "noImplicitAny": false,
    "lib": [
      "es6",
      "dom",
      "es2015.collection"
    ],
    "typeRoots": "./node_modules/@types",
    "experimentalDecorators":true,
    "emitDecoratorMetadata": true,
    "sourceMap": true,
    "declaration": false
  },
  "exclude": ["node_modules"]
}
</code></pre>
<blockquote>
<p>Votre projet est prêt pour compiler du TypeScript</p>
</blockquote>
<h3>Création du serveur de développement</h3>
<p>Nous allons maintenant mettre en place le serveur de développement.</p>
<p>A la racine de projet, créer le fichier bs-config.js et collez le script suivant :</p>
<pre><code class="javascript">var proxyMiddleware = require('http-proxy-middleware');
var fallbackMiddleware = require('connect-history-api-fallback');

module.exports = {
    "port": 8000,
    "files": [
        "./webapp/**/*.{html,htm,css,js}",
        "./node_modules/**/*.{html,htm,css,js}"
    ],
    "server": {
        "baseDir": "webapp",
        "routes": {
            "/node_modules": "node_modules"
        },

        middleware: {
            1: proxyMiddleware('/api', {
                target: 'http://futurlogement5.azurewebsites.net',
                changeOrigin: true   // for vhosted sites, changes host header to match to target's host
            }),

            2: fallbackMiddleware({
                index: '/index.html',
                verbose: true
            })
        }
    }
};
</code></pre>
<p>Ensuite il vous faut éditer le <code>package.json</code> et ajouter ceci :</p>
<pre><code>{
  "scripts": {
     "serve": "lite-server"
  }
}
</code></pre>
<blockquote>
<p><code>scripts</code> permet d'ajouter de nouvelle commande NPM qui peuvent être appelées en ligne de commande avec <code>npm run [nom cmd]</code>.</p>
</blockquote>
<p>Notre serveur de développement est prêt. Il nous reste plus qu'à créer un dossier <code>webapp</code> avec une première page <code>index.html</code>.</p>
<h3>Création de l'application web</h3>
<p>Voici à quoi la page d'index doit ressembler :</p>
<pre><code class="html">&#x3C;!DOCTYPE html>
&#x3C;html lang="en">
&#x3C;head>
    &#x3C;title>TP&#x3C;/title>
    &#x3C;!--Import Google Icon Font-->
    &#x3C;link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    &#x3C;!--Import materialize.css-->
    &#x3C;link type="text/css" rel="stylesheet" href="node_modules/materialize-css/bin/materialize.css"  media="screen,projection"/>

    &#x3C;!--Let browser know website is optimized for mobile-->
    &#x3C;meta name="viewport" content="width=device-width, initial-scale=1.0"/>
&#x3C;/head>
&#x3C;body>

    &#x3C;app>

    &#x3C;/app>

    &#x3C;!-- vendor -->
    &#x3C;script type="text/javascript" src="node_modules/materialize-css/bin/jquery-2.1.1.min.js">&#x3C;/script>
    &#x3C;script type="text/javascript" src="node_modules/materialize-css/bin/materialize.js">&#x3C;/script>
    &#x3C;!-- end vendor -->

    &#x3C;script type="text/javascript" src="scripts/app.js">&#x3C;/script>
&#x3C;/body>
&#x3C;/html>
</code></pre>
<p>Ici il nous manque le script <code>app.js</code>. Notez que dans la page d'index nous incluerons toujours le fichier javascript généré par TypeScript et non
le fichier <code>app.ts</code>. </p>
<p>Dans le dossier <code>scripts</code>, créer un nouveau fichier <code>app.ts</code>.</p>
<p>L'exercice sera d'intercepter la balise <code>app</code> et d'y afficher un <code>HELLO WORLD</code> avec jQuery.</p>
<blockquote>
<p>Note : pour lancer votre server <code>npm run serve</code>.</p>
<p>Note 2 : pour compiler votre fichier TypeScript <code>tsc</code>.</p>
<p>Correction du TP : <a href="../../Resources/tp1-installation.zip">tp1-installation</a></p>
</blockquote>

<div id="tp2creationduncomposant"></div>
<h1>TP 2</h1>
<blockquote>
<p>Création d'un composant</p>
</blockquote>
<p>Notre exercice sera de créer un premier composant <code>card</code> basé sur le framework CSS materialize-css (<a href="http://materializecss.com/cards.html">documentation</a>).</p>
<p>Ce composant <code>card</code> nous permettre d'afficher un résumé d'une annonce. Nous le réutiliserons pour afficher une liste d'annonce très visuel !</p>
<p>Voici le template materialize-css d'une <code>card</code>: </p>
<pre><code class="html">&#x3C;div class="card">
    &#x3C;div class="card-image">
        &#x3C;img src="images/path.png">
        &#x3C;span class="card-title">Titre&#x3C;/span>
    &#x3C;/div>
    &#x3C;div class="card-stacked">
        &#x3C;div class="card-content">
            Contenu
        &#x3C;/div>
        &#x3C;div class="card-action">
            &#x3C;a href="#">Voir annonce&#x3C;/a>
         &#x3C;/div>
    &#x3C;/div>
&#x3C;/div>
</code></pre>
<blockquote>
<p>Nous allons construire ce composant ensemble !</p>
<p>Correction du TP : <a href="../../Resources/tp2-solution.zip">tp2-solution</a></p>
</blockquote>

<div id="tp3creationdunserviceetappeldunwebservice"></div>
<h1>TP 3</h1>
<blockquote>
<p>Création d'un service</p>
</blockquote>
<p>Bien que nous n'utilisions pas de framework avancé comme Angular, View.js ou React.js, il est toujours pratique de mettre place
des patterns de conception. Cela permet de structurer rapidement notre code et il est ainsi plus facile à porter vers un autre
framework.</p>
<p>Nous allons donc mettre en place un service qui aura pour objectif d'appeler le webservice <code>api/serviceannoncesimmobilieres</code>
pour récupérer la liste des annonces.</p>
<p>Nous verrons comment utiliser la nouvelle API Fetch pour faire une appel Ajax et commment typer une reponse Ajax pour profiter
de l'analyse statique du code proposé par TypeScript et les IDE tels que Webstorm.</p>
<h3>Créer le service</h3>
<p>Notre service sera nommé <code>RealEstateAdService</code> par convention et aura une methode <code>getAll()</code> qui retournera une Promise
avec pour reponse la liste des annonces.</p>
<h4>Voici le contrat de service</h4>
<ul>
<li>Methode : GET</li>
<li>Url : <code>api/serviceannoncesimmobilieres</code></li>
<li>Réponse : Liste d'annonce</li>
</ul>
<h4>Structure d'une annonce</h4>
<ul>
<li>Id : number,</li>
<li>Titre : string,</li>
<li>Ville : string,</li>
<li>Latitude : number,</li>
<li>Longitude : number,</li>
<li>Achat : boolean,</li>
<li>Location : boolean,</li>
<li>Appartement : boolean,</li>
<li>Maison : boolean,</li>
<li>Chateau : boolean,</li>
<li>Prix : number,</li>
<li>NbrPieces : number,</li>
<li>Surface : number,</li>
<li>Etage : number,</li>
<li>Ascenceur : boolean,</li>
<li>Terrasse : boolean,</li>
<li>Parking : boolean,</li>
<li>Descriptif : string,</li>
<li>ListImagesUrl : tableau de string,</li>
<li>UrlImagePrincipale : tableau de string.</li>
</ul>
<h3>Installation de fetch</h3>
<pre><code class="bash">npm install --save whatwg-fetch @types/whatwg-fetch 
</code></pre>
<blockquote>
<p>N'oubliez pas de rajouter whatwg-fetch à la liste des <code>types</code> dans votre <code>tsconfig.json</code> ! </p>
</blockquote>
<h3>Exercice 1</h3>
<p>A partir de la structure d'annonce créer une interface TypeScript correspondant à sa structure.</p>
<h3>Exercice 2</h3>
<p>Créer la classe <code>RealEstateAdService</code> avec une methode <code>getAll()</code>. La methode getAll() doit utiliser l'API
<code>fetch</code> pour appeler le webservice (<a href="https://developer.mozilla.org/fr/docs/Web/API/Fetch_API/Using_Fetch">documentation</a>).</p>
<h3>Exercice 3</h3>
<p>Typer le retour de la methode <code>getAll()</code> de façon à ce qu'elle expose une Promise de liste d'annonce.</p>
<h3>Exercice 4</h3>
<p>Utiliser la méthode <code>getAll()</code> dans l'application pour afficher la liste d'annonce avec notre composant <code>card</code>.</p>
<blockquote>
<p>Correction du TP  : <a href="../../Resources/tp3-solution.zip">tp3-solution</a></p>
</blockquote>

<div id="tp4creationdundecorateur"></div>
<h1>TP 4</h1>
<blockquote>
<p>Les décorateurs</p>
</blockquote>
<p>L'idée est de déléguer la création de composant à un factory que l'on nommera <code>ComponentsFactory</code>.</p>
<p>Cette factory sera ni plus ni moins qu'un registre de composant collecté par le décorateur <code>@component</code>.</p>
<p>Voici un exemple de ce qui sera attendu :</p>
<pre><code class="typescript">@component('card')
export class CardComponent extends Component {
   
    
    render() {
        return "Hello card";
    }
}

@component('app', Card)
export class AppComponent extends Component {
    
    render() {
        return `
            &#x3C;card>&#x3C;/card>  
        `;
    }
    
}

ComponentsFactory.bootstrap(AppComponent);
</code></pre>
<blockquote>
<p>Cette exemple va intercepter tous les éléments <code>card</code> et créer une nouvelle instance de <code>CardComponent</code>.</p>
</blockquote>
<h3>Création du ComponentsFactory</h3>
<p>Dans le dossier <code>services</code> nous allons créer un nouveau fichier <code>ComponentsFactory.ts</code>.</p>
<p>Voici une partie de l'implémentation de la factory :</p>
<pre><code class="typescript">module app.services {

    export class ComponentsFactory {
        private static components = new Map&#x3C;string | any, any | string>();

        /**
         * Add a new component in registry.
         */
        static add(selector: string, target: any, childrens: any[] = []) {

            target.$childrens = childrens;

            this.components.set(selector, target);
            this.components.set(target, selector);
        }

    }
}
</code></pre>
<h3>Création du décorateur</h3>
<p>Maintenant nous allons développer le décorateur de classe pour collecter les classes auxquelles il sera associé.</p>
<p>À partir de l'exemple donné dans le cours, créez le décorateur ! Ce décorateur aura deux paramètres :</p>
<ul>
<li>selector : le selecteur css associé à la classe composant,</li>
<li>dependencies : Aggregateur contenant la liste des composants utilisés par la classe en court.</li>
</ul>
<h2>Modification de l'application</h2>
<p>Une fois votre décorateur réalisé, nous allons l'utiliser sur la classe <code>CardComponent</code> et <code>AppComponent</code>.
Ajoutez donc votre décorateur <code>@component</code> comme présenté dans le premier exemple et vérifiez que le décorateur fonctionne.</p>
<blockquote>
<p>Si vous souhaitez tester votre décorateur, vous pouvez ajouter un console.log() pour voir si votre composant est bien collecté.</p>
</blockquote>
<p>A se stade, nous n'avons implémenté qu'une partie de la logique. Le décorateur fait ce qu'on lui demande, mais il fait
développer un peu notre <code>ComponentsFactory</code> pour qu'il gère complétement le cycle de vie de nos composants.</p>
<p>Nous allons commencer par simplifier nos composants et déléguer un maximum de traitement vers la classe <code>Component</code> et <code>ComponentsFactory</code>.</p>
<h3>Utilisation de classe abstraite</h3>
<p>L'utilisation de classe de abstraite permet de fournir une classe de base contenant un certain nombre de fonctionnalité commune à un type
de classe, ici les composants.</p>
<p>Voici les possibilités d'une classe abstraite :</p>
<ul>
<li>Ne peut être instancié directement. Elle doit donc être étendu (héritage).</li>
<li>Elle contient des attributs et méthodes avec implémentation.</li>
<li>Elle peut définir des méthodes abstraites. Ainsi une méthode abstraite doit obligatoirement être implémenté dans la classe fille.</li>
</ul>
<p>Nous allons donc implémenter cette classe ensemble ! Elle aura pour objectifs :</p>
<ul>
<li>De construire l'élément jQuery,</li>
<li>Exposer des accesseurs à l'élément jQuery et aux attributs de l'élément,</li>
<li>Stocker le contenu d'origine de la balise,</li>
<li>De définir une méthode abstraite <code>render()</code>.</li>
</ul>
<p>Maintenant que notre classe abstraite est défini nous pourrons l'utiliser comme dans l'exemple suivant :</p>
<pre><code class="typescript">@component('card')
export class CardComponent extends Component {
   
    render() {
        return "Hello card";
    }
}
</code></pre>
<h3>Finalisation de ComponentsFactory</h3>
<p>Nous allons maintenant agrémenter la classe ComponentsFactory afin de gérer le cycle de vie suivant :</p>
<ul>
<li>Initialisation du premier composant,</li>
<li>Rendu du composant et des composants utilisés par le composant,</li>
<li>Rappel après création du rendu du composant en cours.</li>
</ul>
<h4>Initialisation du premier composant</h4>
<p>Pour gérer l'initialisation du premier composant nous allons rajouter ceci :</p>
<pre><code class="typescript">module app.services {

    export class ComponentsFactory {

        static boostrap(cmpClazz: any) {

            jQuery(document).ready(() => {
                this.render(cmpClazz);
            });

        }

    }
}
</code></pre>
<h3>Implémentation de la méthode render()</h3>
<p>Cette méthode prend la classe d'un composant (<code>Card</code> par exemple) et recherche dans le DOM tous les élements correspondant
au selecteur que nous avons collecté avec le décorateur <code>@component()</code>.</p>
<pre><code class="typescript">module app.services {

    export class ComponentsFactory {
    
        static render(cmpClazz: any) {

            const selector: string = this.components.get(cmpClazz) as string;

            this.fromSelector(selector, cmpClazz)
                .forEach(cmp => cmp.render());

        }
    }
}
</code></pre>
<h3>Implémentation de la méthode fromSelector()</h3>
<pre><code class="typescript">module app.services {

    export class ComponentsFactory {
        static fromSelector(selector: string, componentClazz: any) {

            const elements = jQuery(selector);
            const cmps = [];

            elements.each((index, element: Element) => {

                const cmp = new componentClazz(element);

                cmps.push(cmp);

                if (cmp.onInit) {
                    cmp.onInit();
                }

                cmp.$render = cmp.render;

                cmp.render = function() {
                    this.element.html(this.$render());

                    componentClazz.$childrens.forEach(childrenClazz => {

                        ComponentsFactory.render(childrenClazz);

                    });

                    if (this.afterRender) {
                        this.afterRender();
                    }
                };
            });

            return cmps;
        }
    }
}
</code></pre>
<p>Maintenant notre <code>ComponentsFactory</code> est prête il nous reste plus qu'à adapter notre application !</p>
<blockquote>
<p>Correction du TP  : <a href="../../Resources/tp4-solution.zip">tp4-solution</a></p>
</blockquote>

<div id="tp5rechercheruneannonce"></div>
<h1>TP5</h1>
<blockquote>
<p>Rechercher une annonce</p>
</blockquote>
<p>Nous allons maintenant créer une composant permettant de rechercher une annonce.
Cette recherche relancera une nouvelle requête avec les critères de recherche saisie.</p>
<p>L'objectif est d'améliorer la méthode <code>RealEstateAdService.getAll()</code> afin de proposer
des options de recherche.</p>
<h4>Rappel : Le contrat de service</h4>
<ul>
<li>Methode : GET</li>
<li>Url : <code>api/serviceannoncesimmobilieres</code></li>
<li>Réponse : Liste d'annonce</li>
</ul>
<h4>Structure d'une annonce</h4>
<ul>
<li>Id : number,</li>
<li>Titre : string,</li>
<li>Ville : string,</li>
<li>Latitude : number,</li>
<li>Longitude : number,</li>
<li>Achat : boolean,</li>
<li>Location : boolean,</li>
<li>Appartement : boolean,</li>
<li>Maison : boolean,</li>
<li>Chateau : boolean,</li>
<li>Prix : number,</li>
<li>NbrPieces : number,</li>
<li>Surface : number,</li>
<li>Etage : number,</li>
<li>Ascenceur : boolean,</li>
<li>Terrasse : boolean,</li>
<li>Parking : boolean,</li>
<li>Descriptif : string,</li>
<li>ListImagesUrl : tableau de string,</li>
<li>UrlImagePrincipale : tableau de string.</li>
</ul>
<h4>Les paramètres de recherche possibles</h4>
<ul>
<li>Ville : Nom de la ville de recherche (le service veut un nom exacte),</li>
<li>Achat : S'agit-il d'un achat (True ou False),</li>
<li>Location : S'agit-il d'une location (True ou False),</li>
<li>Appartement : S'agit-il d'un appartement (True ou False),</li>
<li>Maison : S'agit-il d'une maison (True ou False),</li>
<li>Chateau : S'agit-il d'un chateau (True ou False),</li>
<li>PrixMin : Prix minimum du bien recherché,</li>
<li>PrixMax : Prix maximal du bien recherché,</li>
<li>SurfaceMin : Surface minimal du bien recherché,</li>
<li>SurfaceMax : Surface maximal du bien recherché.</li>
</ul>
<blockquote>
<p>Le service s'attend à avoir toutes les options de recherche !</p>
</blockquote>
<p>Exemple d'url : <code>api/serviceannoncesimmobilieres?Ville=paris&#x26;Achat=True&#x26;Location=False&#x26;Appartement=True&#x26;Maison=False&#x26;Chateau=False&#x26;PrixMin=490578&#x26;PrixMax=500000&#x26;SurfaceMin=0&#x26;SurfaceMax=300</code>.</p>
<h3>Exercice 1</h3>
<p>Créer l'interface <code>IAdRequest</code> correspondant aux paramètres.</p>
<h3>Exercice 2</h3>
<p>Créer un composant permettant de rechercher les annonces par ville.</p>
<blockquote>
<p>Correction du TP  : <a href="../../Resources/tp5-solution.zip">tp5-solution</a></p>
</blockquote>

<div id="tp6consultationduneannonce"></div>
<h1>TP6</h1>
<blockquote>
<p>Visualisation d'une annonce</p>
</blockquote>
<p>L'objectif est de visualiser une annonce dans une nouvelle page.</p>
<h1>Exercice 1</h1>
<p>Créez la nouvelle page <code>edit.html</code> dans lequel vous appelerez le composant <code>&#x3C;app type="edit"></code> avec l'option <code>edit</code> par exemple.</p>
<blockquote>
<p>Vous pouvez faire autrement si vous le souhaitez.</p>
</blockquote>
<h1>Exercice 2</h1>
<p>Il vous faudra récupérer l'id de l'annonce cliqué dans la page précédente et afficher les informations
de l'annonce.</p>
<p>Vous avez un service web qui permet de récupérer une annonce !</p>
<h4>Le contrat de service</h4>
<ul>
<li>Methode : GET</li>
<li>Url : <code>api/serviceannoncesimmobilieres/{id}</code></li>
<li>Réponse : Une annonce</li>
</ul>
<p>Vous devrez donc créer une nouvelle méthode dans <code>RealEstateAdService</code> pour récupérer une instance annonce.</p>
<p>A vous de jouer !</p>
<h1>Exercice 3</h1>
<p>Vous devez afficher les photos de l'annonce dans un carousel fournit par <a href="http://materializecss.com/carousel.html">Materialize-css</a>.
Ensuite vous devez afficher le détail de l'annonce.</p>
<blockquote>
<p>Correction du TP : <a href="../../Resources/tp6-solution.zip">tp6-solution</a></p>
</blockquote>

    </article>
</div>

<footer class="page-footer">

    <div class="container">

        <div class="row">
            <div class="col l12 s12">
                <p><a href="mailto:info@valtech.fr">info@valtech.fr</a></p>
                <p>Vous avez une vision concernant l'avenir digital de votre entreprise ? N'hésitez pas à nous contacter.</p>
                <p>Tél : 01 76 21 15 00</p>
                <p class="foot__offices">
                    <span>Aarhus | Amserfoort | Amsterdam | Bangalore | Bristol | Buenos Aires | Chicago | Copenhagen | Dallas | Düsseldorf | Eindhoven | Frankfurt | Geneva | Gurgaon | Göteborg | Honolulu | London | Malmö | Manchester | Montreal | Munich | New York | Paris | Singapore | Stockholm | Sydney | Uppsala | Utrecht | Västerås</span>
                </p>
            </div>
        </div>

        <div class="footer-social">
            <ul>
                <li><a href="https://www.facebook.com/valtech.fr"><i class="glyph" data-icon="facebook" title="Suivez-nous à facebook" aria-hidden="true"></i><span class="hidden">facebook</span></a></li>
                <li><a href="https://www.linkedin.com/company/valtech"><i class="glyph" data-icon="linkedin" title="Suivez-nous à linkedin" aria-hidden="true"></i><span class="hidden">linkedin</span></a></li>
                <li><a href="https://www.instagram.com/valtech_fr/"><i class="glyph" data-icon="instagram" title="Suivez-nous à instagram" aria-hidden="true"></i><span class="hidden">instagram</span></a></li>
                <li><a href="https://twitter.com/Valtech_FR"><i class="glyph" data-icon="twitter" title="Suivez-nous à twitter" aria-hidden="true"></i><span class="hidden">twitter</span></a></li>
            </ul>
        </div>



    </div>

    <div class="footer-copyright">
        <div class="container">

            © Valtech 2016

            <a  class="grey-text text-lighten-4 right"  href="http://valtech.fr/services/mentions-legales-cgu/">
                Mentions légales / CGU
            </a>

            </ul>
        </div>
    </div>

</footer>

<script type="text/javascript" src="assets/scripts/jquery.min.js"></script>
<script type="text/javascript" src="assets/scripts/materialize.min.js"></script>
<script type="text/javascript" src="assets/scripts/highlight.pack.js"></script>

<script>
    $( document ).ready(function(){
        $(".button-collapse").sideNav();
        $(".dropdown-button").dropdown();
    });
</script>


<script>
    hljs.initHighlightingOnLoad();
</script>

</body>
</html>